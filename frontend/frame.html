
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Immersive Farm World</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.0/dist/aframe-environment-component.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; }
        #loading-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(#87CEEB, #E0F7FA);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            color: white;
            font-family: Arial;
            flex-direction: column;
        }
        .loader {
            width: 100px;
            height: 100px;
            border: 15px solid rgba(255,255,255,0.2);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1.5s linear infinite;
            margin-bottom: 20px;
        }
        @keyframes spin {
            100% { transform: rotate(360deg); }
        }
        .progress-bar {
            width: 200px;
            height: 10px;
            background: rgba(255,255,255,0.2);
            border-radius: 5px;
            margin-top: 20px;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            width: 0%;
            background: white;
            transition: width 0.3s;
        }
    </style>
</head>
<body>
    <div id="loading-screen">
        <div class="loader"></div>
        <div>Loading Farm World...</div>
        <div class="progress-bar"><div class="progress" id="progress"></div></div>
    </div>
     <div class="gallery">
    <img src="img1.png" alt="Field with crops">
    <img src="img2.png" alt="Farmer in a field">
    <img src="img3.png" alt="Modern farming equipment">
    <img src="img1.png" alt="Field with crops">
    <img src="img2.png" alt="Farmer in a field">
    <img src="img3.png" alt="Modern farming equipment">
  </div>
    <a-scene environment="preset: forest; groundColor: #44582e; dressingAmount: 150; dressingColor: #5a7243">
        <!-- Sky with clouds -->
        <a-sky color="#87CEEB"></a-sky>
        <a-entity id="clouds"></a-entity>
        
        <!-- Lighting -->
        <a-light type="ambient" color="#445588" intensity="0.6"></a-light>
        <a-light type="directional" color="#ffeeaa" intensity="0.8" position="-1 1 0.5" cast-shadow></a-light>
        <a-light type="hemisphere" color="#87CEEB" groundColor="#4CAF50" intensity="0.3"></a-light>

        <!-- Terrain -->
        <a-entity geometry="primitive: plane; width: 200; height: 200" rotation="-90 0 0" 
                 material="color: #3a5c2b; roughness: 1"></a-entity>
           <a-entity geometry="primitive: plane; width: 100; height: 100" rotation="-90 0 0" 
                 material="color: #3a5c2b; roughness: 1"></a-entity>

        <!-- Village houses -->
        <a-entity position="-5 0 -10">
            <a-box position="0 1.5 0" width="4" height="3" depth="4" color="#8B4513"></a-box>
            <a-box position="0 3.5 0" width="4.5" height="1" depth="4.5" color="#A0522D" rotation="0 10 0"></a-box>
            <a-box position="0 0.5 -2" width="1" height="1" depth="1" color="#708090"></a-box>
        </a-entity>
<a-entity position="8 0 -15">
            <a-box position="0 1.2 0" width="3" height="2.4" depth="3" color="#D2B48C"></a-box>
            <a-sphere position="0 3 0" radius="1.8" color="#2E8B57"></a-sphere>
        </a-entity>
        <!-- ========== CROP FIELDS ========== -->
        <!-- Windmill -->
 <a-assets>
        <a-asset-item id="agriModel" src="assets/agri-worker.glb"></a-asset-item>
      </a-assets>

      <a-entity 
        gltf-model="#agriModel" 
        position="0 0 -3" 
        scale="0.5 0.5 0.5" 
        rotation="0 180 0">
      </a-entity>

        <a-entity position="15 0 -20" rotation="0 45 0">
            <a-cylinder position="0 5 0" radius="1" height="10" color="#A0522D"></a-cylinder>
            <a-sphere position="0 10 0" radius="2" color="#8B4513"></a-sphere>
            <a-entity class="windmill-blades" rotation="0 0 0">
                <a-box position="0 9 3" width="0.2" height="5" depth="0.5" color="#FFFFFF"></a-box>
                <a-box position="0 9 -3" width="0.2" height="5" depth="0.5" color="#FFFFFF"></a-box>
                <a-box position="3 9 0" width="0.2" height="5" depth="0.5" color="#FFFFFF" rotation="0 90 0"></a-box>
                <a-box position="-3 9 0" width="0.2" height="5" depth="0.5" color="#FFFFFF" rotation="0 90 0"></a-box>
            </a-entity>
        </a-entity>
         <a-image src="img1.png" position="-6 2 -8" width="3" height="2" rotation="0 20 0"></a-image>
    <a-box src="img2.png" position="0 1.5 -5" depth="2" height="2" width="3"></a-box>
    

    <a-image src="img3.png" position="-4 1.5 -14" width="2.5" height="1.8" rotation="0 15 0"></a-image>
    <a-image src="img1.png" position="3 2 -17" width="3" height="2" rotation="0 -10 0"></a-image>
    <a-image src="img2.png" position="0 2 -20" width="4" height="2.5" rotation="0 0 0"></a-image>
    <a-image src="img3.png" position="-8 2 -18" width="2" height="1.5" rotation="0 10 0"></a-image>
    
        <a-entity id="wheat-field" position="0 0 -15">
        <!-- Paddy Field with Water -->
        <a-entity id="paddy-field" position="-40 0 0">
            <a-plane width="40" height="30" rotation="-90 0 0" position="0 0.1 0"
                     color="#4a80f5" opacity="0.6" roughness="0.2" metalness="0.3"></a-plane>
            <a-entity id="paddy-plants"></a-entity>
            <a-entity class="farmer" position="5 0 5" rotation="0 90 0"></a-entity>
            <a-entity class="buffalo" position="-5 0 -8" rotation="0 45 0"></a-entity>
        </a-entity>
        
        <!-- Sunflower Field -->
        <a-entity id="sunflower-field" position="40 0 0">
            <a-plane width="40" height="30" rotation="-90 0 0" color="#DAA520"></a-plane>
            <a-entity id="sunflower-plants"></a-entity>
            <a-entity class="tractor" position="0 0 -5" rotation="0 180 0"></a-entity>
        </a-entity>
        
        <!-- Rose Garden -->
        <a-entity id="rose-garden" position="0 0 -50">
            <a-plane width="30" height="40" rotation="-90 0 0" color="#556B2F"></a-plane>
            <a-entity id="rose-plants"></a-entity>
            <a-entity class="farmer" position="8 0 10" rotation="0 45 0"></a-entity>
        </a-entity>
        
        <!-- Cotton Field -->
        <a-entity id="cotton-field" position="0 0 50">
            <a-plane width="50" height="30" rotation="-90 0 0" color="#8B4513"></a-plane>
            <a-entity id="cotton-plants"></a-entity>
            <a-entity class="plough" position="-10 0 0" rotation="0 90 0"></a-entity>
        </a-entity>

        <!-- ========== TREES ========== -->
        
        <!-- Coconut Tree Grove -->
        <a-entity id="coconut-trees" position="-60 0 -30">
            <a-plane width="30" height="30" rotation="-90 0 0" color="#5CAB7D"></a-plane>
            <a-entity id="coconut-plants"></a-entity>
        </a-entity>
        
        <!-- Mango Tree Grove -->
        <a-entity id="mango-trees" position="60 0 -30">
            <a-plane width="30" height="30" rotation="-90 0 0" color="#5CAB7D"></a-plane>
            <a-entity id="mango-plants"></a-entity>
        </a-entity>
        
        <!-- Random Trees -->
        <a-entity id="random-trees"></a-entity>

        <!-- ========== WATER BODIES ========== -->
        
        <!-- Main Pond -->
        <a-entity position="0 0 -10">
            <a-circle radius="15" rotation="-90 0 0" position="0 0.1 0"
                      color="#4a80f5" opacity="0.7" roughness="0.1" metalness="0.4"></a-circle>
            <a-entity class="cow" position="5 0 5" rotation="0 120 0"></a-entity>
        </a-entity>
        
        <!-- Small Watering Hole -->
        <a-entity position="30 0 30">
            <a-circle radius="8" rotation="-90 0 0" position="0 0.1 0"
                      color="#4a80f5" opacity="0.7"></a-circle>
        </a-entity>

        <!-- ========== ROAD NETWORK ========== -->
        
        <!-- Main Road -->
        <a-box position="0 0.01 0" width="200" height="0.2" depth="8" color="#A9A9A9"></a-box>
        
        <!-- Cross Roads -->
        <a-box position="-40 0.01 0" width="8" height="0.2" depth="100" color="#A9A9A9"></a-box>
        <a-box position="40 0.01 0" width="8" height="0.2" depth="100" color="#A9A9A9"></a-box>
        <a-box position="0 0.01 50" width="60" height="0.2" depth="8" color="#A9A9A9"></a-box>
        <a-box position="0 0.01 -50" width="60" height="0.2" depth="8" color="#A9A9A9"></a-box>

        <!-- ========== BIRDS ========== -->
        <a-entity id="birds"></a-entity>

        <!-- ========== PLAYER ========== -->
        <a-entity id="player" position="0 1.6 0" movement-controls>
            <a-entity camera look-controls wasd-controls="fly: false"></a-entity>
            <!-- Simple avatar -->
            <a-cylinder radius="0.3" height="1.7" position="0 0.85 0" color="#4682B4"></a-cylinder>
            <a-sphere radius="0.25" position="0 1.6 0" color="#FFD3B6"></a-sphere>
        </a-entity>

        <!-- ========== SCRIPT ========== -->
        <script>
            // Update loading progress
            function updateProgress(percent) {
                document.getElementById('progress').style.width = percent + '%';
            }
            
            // Create elements after scene loads
            document.querySelector('a-scene').addEventListener('loaded', function() {
                updateProgress(20);
                
                // Create clouds
                const clouds = document.getElementById('clouds');
                for (let i = 0; i < 8; i++) {
                    const cloud = document.createElement('a-entity');
                    const x = Math.random() * 200 - 100;
                    const z = Math.random() * 200 - 100;
                    const size = 5 + Math.random() * 10;
                    
                    cloud.setAttribute('position', `${x} 15 ${z}`);
                    cloud.setAttribute('scale', `${size} ${size*0.5} ${size}`);
                    cloud.innerHTML = `
                        <a-sphere radius="1" color="white" opacity="0.8" position="${-1} 0 0"></a-sphere>
                        <a-sphere radius="1.2" color="white" opacity="0.8" position="0.5 0.3 0.3"></a-sphere>
                        <a-sphere radius="0.8" color="white" opacity="0.8" position="1 -0.2 0"></a-sphere>
                    `;
                    cloud.setAttribute('animation', {
                        property: 'position.x',
                        to: x + (Math.random() > 0.5 ? 50 : -50),
                        dur: 60000 + Math.random() * 60000,
                        loop: true
                    });
                    clouds.appendChild(cloud);
                }
                updateProgress(30);
                
                // Create paddy plants
                const paddyPlants = document.getElementById('paddy-plants');
                for (let i = 0; i < 200; i++) {
                    const plant = document.createElement('a-entity');
                    const x = (Math.random() - 0.5) * 38;
                    const z = (Math.random() - 0.5) * 28;
                    const height = 0.8 + Math.random() * 0.4;
                    
                    plant.setAttribute('position', `${x} 0 ${z}`);
                    plant.innerHTML = `
                        <a-cone height="${height}" radius-bottom="0.1" radius-top="0" color="#8FBC8F"></a-cone>
                        <a-sphere position="0 ${height*0.8} 0" radius="0.05" color="#FFD700"></a-sphere>
                    `;
                    plant.setAttribute('animation', {
                        property: 'rotation.z',
                        to: (Math.random() > 0.5 ? 10 : -10),
                        dir: 'alternate',
                        dur: 2000 + Math.random() * 3000,
                        loop: true
                    });
                    paddyPlants.appendChild(plant);
                }
                updateProgress(40);
                
                // Create sunflower plants
                const sunflowerPlants = document.getElementById('sunflower-plants');
                for (let i = 0; i < 100; i++) {
                    const plant = document.createElement('a-entity');
                    const x = (Math.random() - 0.5) * 38;
                    const z = (Math.random() - 0.5) * 28;
                    
                    plant.setAttribute('position', `${x} 0 ${z}`);
                    plant.innerHTML = `
                        <a-cylinder height="1.5" radius="0.1" color="#228B22"></a-cylinder>
                        <a-circle position="0 0.8 0" rotation="-90 0 0" radius="0.6" color="#FFD700"></a-circle>
                        <a-circle position="0 0.81 0" rotation="-90 0 0" radius="0.3" color="#8B0000"></a-circle>
                    `;
                    sunflowerPlants.appendChild(plant);
                }
                updateProgress(50);
                
                // Create rose plants
                const rosePlants = document.getElementById('rose-plants');
                for (let i = 0; i < 150; i++) {
                    const plant = document.createElement('a-entity');
                    const x = (Math.random() - 0.5) * 28;
                    const z = (Math.random() - 0.5) * 38;
                    
                    plant.setAttribute('position', `${x} 0 ${z}`);
                    plant.innerHTML = `
                        <a-cylinder height="0.6" radius="0.03" color="#228B22"></a-cylinder>
                        <a-sphere position="0 0.3 0" radius="0.15" color="#FF0000"></a-sphere>
                    `;
                    rosePlants.appendChild(plant);
                }
                updateProgress(60);
                
                // Create cotton plants
                const cottonPlants = document.getElementById('cotton-plants');
                for (let i = 0; i < 200; i++) {
                    const plant = document.createElement('a-entity');
                    const x = (Math.random() - 0.5) * 48;
                    const z = (Math.random() - 0.5) * 28;
                    
                    plant.setAttribute('position', `${x} 0 ${z}`);
                    plant.innerHTML = `
                        <a-cylinder height="0.8" radius="0.05" color="#228B22"></a-cylinder>
                        <a-sphere position="0 0.4 0" radius="0.15" color="#FFFFFF"></a-sphere>
                    `;
                    cottonPlants.appendChild(plant);
                }
                updateProgress(70);
                
                // Create coconut trees
                const coconutTrees = document.getElementById('coconut-plants');
                for (let i = 0; i < 15; i++) {
                    const tree = document.createElement('a-entity');
                    const x = (Math.random() - 0.5) * 28;
                    const z = (Math.random() - 0.5) * 28;
                    
                    tree.setAttribute('position', `${x} 0 ${z}`);
                    tree.innerHTML = `
                        <a-cylinder height="8" radius="0.4" color="#8B4513" position="0 4 0"></a-cylinder>
                        <a-cone height="5" radius-bottom="3" radius-top="0" color="#006400" position="0 8 0"></a-cone>
                        <a-sphere radius="0.3" color="#8B0000" position="${Math.random()*2-1} 7 ${Math.random()*2-1}"></a-sphere>
                    `;
                    coconutTrees.appendChild(tree);
                }
                updateProgress(80);
                
                // Create mango trees
                const mangoTrees = document.getElementById('mango-plants');
                for (let i = 0; i < 12; i++) {
                    const tree = document.createElement('a-entity');
                    const x = (Math.random() - 0.5) * 28;
                    const z = (Math.random() - 0.5) * 28;
                    
                    tree.setAttribute('position', `${x} 0 ${z}`);
                    tree.innerHTML = `
                        <a-cylinder height="6" radius="0.5" color="#8B4513" position="0 3 0"></a-cylinder>
                        <a-sphere radius="3" color="#228B22" position="0 6 0"></a-sphere>
                        <a-sphere radius="0.2" color="#FF4500" position="${Math.random()*1.5-0.75} 6 ${Math.random()*1.5-0.75}"></a-sphere>
                    `;
                    mangoTrees.appendChild(tree);
                }
                updateProgress(85);
                
                // Create random trees
                const randomTrees = document.getElementById('random-trees');
                for (let i = 0; i < 30; i++) {
                    const tree = document.createElement('a-entity');
                    const x = Math.random() * 180 - 90;
                    const z = Math.random() * 180 - 90;
                    const type = Math.random() > 0.5 ? 'deciduous' : 'conifer';
                    
                    tree.setAttribute('position', `${x} 0 ${z}`);
                    
                    if (type === 'deciduous') {
                        tree.innerHTML = `
                            <a-cylinder height="${4 + Math.random()*3}" radius="${0.3 + Math.random()*0.2}" 
                                        color="#8B4513" position="0 ${(4 + Math.random()*3)/2} 0"></a-cylinder>
                            <a-sphere radius="${1.5 + Math.random()}" color="#228B22" 
                                     position="0 ${4 + Math.random()*3} 0"></a-sphere>
                        `;
                    } else {
                        tree.innerHTML = `
                            <a-cylinder height="${5 + Math.random()*4}" radius="${0.2 + Math.random()*0.2}" 
                                        color="#8B4513" position="0 ${(5 + Math.random()*4)/2} 0"></a-cylinder>
                            <a-cone height="${3 + Math.random()*2}" radius-bottom="${1 + Math.random()}" radius-top="0" 
                                   color="#006400" position="0 ${5 + Math.random()*4} 0"></a-cone>
                        `;
                    }
                    randomTrees.appendChild(tree);
                }
                updateProgress(90);
                
                // Create birds
                const birds = document.getElementById('birds');
                for (let i = 0; i < 12; i++) {
                    const bird = document.createElement('a-entity');
                    const x = Math.random() * 150 - 75;
                    const z = Math.random() * 150 - 75;
                    const y = 10 + Math.random() * 10;
                    
                    bird.setAttribute('position', `${x} ${y} ${z}`);
                    bird.innerHTML = `
                        <a-cone height="0.5" radius-bottom="0.1" radius-top="0" color="#000000" rotation="0 0 -90"></a-cone>
                    `;
                    bird.setAttribute('animation', {
                        property: 'position',
                        to: `${x + (Math.random() * 40 - 20)} ${y + (Math.random() * 4 - 2)} ${z + (Math.random() * 40 - 20)}`,
                        dur: 10000 + Math.random() * 20000,
                        dir: 'alternate',
                        loop: true
                    });
                    birds.appendChild(bird);
                }
                updateProgress(95);
                
                // Create farmers
                document.querySelectorAll('.farmer').forEach((farmer, index) => {
                    farmer.innerHTML = `
                        <a-cylinder height="1.7" radius="0.2" color="#${index % 2 === 0 ? 'FF6347' : '4682B4'}" position="0 0.85 0"></a-cylinder>
                        <a-sphere radius="0.25" color="#FFD3B6" position="0 1.6 0"></a-sphere>
                        <a-cylinder height="0.4" radius="0.15" color="#FFD3B6" position="-0.3 1.3 0" rotation="0 0 45"></a-cylinder>
                        <a-cylinder height="0.4" radius="0.15" color="#FFD3B6" position="0.3 1.3 0" rotation="0 0 -45"></a-cylinder>
                        <a-animation attribute="rotation" to="0 ${360 + (index * 60)} 0" dur="20000" loop="true"></a-animation>
                    `;
                });
                
                // Create tractor
                document.querySelector('.tractor').innerHTML = `
                    <a-box width="3" height="1" depth="2" color="#B22222" position="0 0.5 0"></a-box>
                    <a-cylinder height="0.5" radius="0.5" color="#000000" position="-1 0.25 1"></a-cylinder>
                    <a-cylinder height="0.5" radius="0.5" color="#000000" position="-1 0.25 -1"></a-cylinder>
                    <a-cylinder height="0.5" radius="0.5" color="#000000" position="1 0.25 1"></a-cylinder>
                    <a-cylinder height="0.5" radius="0.5" color="#000000" position="1 0.25 -1"></a-cylinder>
                    <a-animation attribute="position" to="0 0 -25" dur="30000" dir="alternate" loop="true"></a-animation>
                `;
                
                // Create plough
                document.querySelector('.plough').innerHTML = `
                    <a-box width="2" height="0.5" depth="0.5" color="#A9A9A9" position="0 0.25 0"></a-box>
                    <a-cone height="0.5" radius-bottom="0.3" radius-top="0.1" color="#8B4513" position="0 0.25 -1"></a-cone>
                    <a-animation attribute="rotation" to="0 270 0" dur="15000" dir="alternate" loop="true"></a-animation>
                `;
                
                // Create buffalo
                document.querySelector('.buffalo').innerHTML = `
                    <a-box width="1.5" height="0.7" depth="0.8" color="#8B4513" position="0 0.35 0"></a-box>
                    <a-sphere radius="0.3" color="#8B4513" position="0 0.7 0.4"></a-sphere>
                    <a-cone height="0.2" radius-bottom="0.1" radius-top="0" color="#000000" position="0 0.7 0.6" rotation="0 180 0"></a-cone>
                    <a-animation attribute="rotation" to="0 225 0" dur="10000" dir="alternate" loop="true"></a-animation>
                `;
                
                // Create cow
                document.querySelector('.cow').innerHTML = `
                    <a-box width="1.2" height="0.6" depth="0.7" color="#FFFFFF" position="0 0.3 0" material="src: #cowTexture; repeat: 1 1"></a-box>
                    <a-sphere radius="0.25" color="#FFFFFF" position="0 0.6 0.3"></a-sphere>
                    <a-cone height="0.15" radius-bottom="0.08" radius-top="0" color="#000000" position="0 0.6 0.45" rotation="0 180 0"></a-cone>
                    <a-animation attribute="position" to="8 0 8" dur="20000" dir="alternate" loop="true"></a-animation>
                `;
                
                updateProgress(100);
                
                // Hide loading screen after everything is ready
                setTimeout(() => {
                    document.getElementById('loading-screen').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('loading-screen').style.display = 'none';
                    }, 500);
                }, 1000);
            });
        </script>
    </a-scene>
</body>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Third-Person VR Village with Interactive Blackboards</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.3.0/dist/aframe-environment-component.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; }
        a-scene { height: 100vh; width: 100vw; }
        .file-input { display: none; }
        .file-info {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(255,255,255,0.8);
            padding: 5px;
            border-radius: 5px;
            font-family: Arial;
            font-size: 12px;
            max-width: 200px;
            word-wrap: break-word;
        }
        
        /* Modal for description input */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border-radius: 10px;
            width: 50%;
            max-width: 500px;
        }
        
        .modal-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            font-family: Arial, sans-serif;
        }
        
        textarea {
            width: 100%;
            height: 100px;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-family: Arial, sans-serif;
            resize: vertical;
        }
        
        .button-container {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        button {
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: Arial, sans-serif;
        }
        
        .submit-btn {
            background-color: #4CAF50;
            color: white;
        }
        
        .cancel-btn {
            background-color: #f44336;
            color: white;
        }
    </style>
</head>
<body>
    <a-scene environment="preset: forest; groundColor: #44582e; dressingAmount: 100">
        <!-- Sky and lighting -->
        <a-sky color="#87CEEB"></a-sky>
        <a-light type="ambient" color="#445588"></a-light>
        <a-light type="directional" color="#ffeeaa" intensity="0.8" position="-1 1 0.5"></a-light>

        <!-- Terrain -->
        <a-entity geometry="primitive: plane; width: 100; height: 100" rotation="-90 0 0" 
                 material="color: #3a5c2b; roughness: 1"></a-entity>

        <!-- Water-filled paddy fields -->
        <a-entity id="paddy-fields" position="0 0 -20">
            <!-- Water surface -->
            <a-plane width="30" height="30" rotation="-90 0 0" position="0 0.1 0"
                     color="#4a80f5" opacity="0.7" roughness="0.2" metalness="0.3"></a-plane>
            
            <!-- Paddy plants -->
            <a-entity id="paddy-plants"></a-entity>
        </a-entity>

        <!-- Village houses -->
        <a-entity position="-10 0 -5">
            <a-box position="0 1.5 0" width="4" height="3" depth="4" color="#8B4513"></a-box>
            <a-box position="0 3.5 0" width="4.5" height="1" depth="4.5" color="#A0522D" rotation="0 10 0"></a-box>
        </a-entity>
        <a-entity id="houses">
            <!-- House 1 -->
            <a-entity position="-15 0 10" rotation="0 30 0">
                <a-box position="0 1.5 0" width="4" height="3" depth="4" color="#8B4513"></a-box>
                <a-box position="0 3.5 0" width="4.5" height="1" depth="4.5" color="#A0522D" rotation="0 10 0"></a-box>
                <a-cone position="0 4.5 0" radius-bottom="2.5" radius-top="0" height="2" color="#8B0000"></a-cone>
            </a-entity>
            
            <!-- House 2 -->
            <a-entity position="20 0 -10" rotation="0 -20 0">
                <a-box position="0 1.5 0" width="5" height="3.5" depth="4" color="#D2B48C"></a-box>
                <a-box position="0 4 0" width="5.5" height="1" depth="4.5" color="#CD853F" rotation="0 5 0"></a-box>
                <a-cylinder position="0 5.5 0" radius="2.8" height="0.5" color="#8B0000"></a-cylinder>
            </a-entity>
            
            <!-- House 3 -->
            <a-entity position="10 0 15" rotation="0 45 0">
                <a-box position="0 1.5 0" width="6" height="2.5" depth="4" color="#BC8F8F"></a-box>
                <a-box position="0 3.5 0" width="6.5" height="0.5" depth="4.5" color="#A0522D"></a-box>
                <a-box position="0 4.25 0" width="6.5" height="0.5" depth="4.5" color="#A0522D" rotation="0 15 0"></a-box>
            </a-entity>
        </a-entity>
        <!-- Interactive blackboards -->
        <a-entity id="blackboards"></a-entity>

        <!-- PLAYER AVATAR -->
        <a-entity id="player-avatar" position="0 0 0">
            <!-- Body -->
            <a-cylinder id="body" radius="0.3" height="1.7" position="0 0.85 0" color="#4682B4"></a-cylinder>
            
            <!-- Head -->
            <a-sphere radius="0.25" position="0 1.6 0" color="#FFD3B6"></a-sphere>
            
            <!-- Eyes -->
            <a-sphere radius="0.05" position="-0.1 1.65 0.2" color="white"></a-sphere>
            <a-sphere radius="0.05" position="0.1 1.65 0.2" color="white"></a-sphere>
            
            <!-- Legs (animated) -->
            <a-box id="left-leg" width="0.2" height="0.8" depth="0.2" position="-0.15 0.4 0" color="#000000"></a-box>
            <a-box id="right-leg" width="0.2" height="0.8" depth="0.2" position="0.15 0.4 0" color="#000000"></a-box>
            
            <!-- Arms (animated) -->
            <a-box id="left-arm" width="0.2" height="0.8" depth="0.2" position="-0.3 1.1 0" rotation="0 0 30" color="#FFD3B6"></a-box>
            <a-box id="right-arm" width="0.2" height="0.8" depth="0.2" position="0.3 1.1 0" rotation="0 0 -30" color="#FFD3B6"></a-box>
        </a-entity>

        <!-- Third-person camera rig -->
        <a-entity id="camera-rig">
            <!-- Camera with offset -->
            <a-entity id="camera" camera position="0 2 -5" look-controls wasd-controls="fly: false">
                <a-cursor></a-cursor>
            </a-entity>
        </a-entity>

        <!-- Hidden file input for uploads -->
        <input type="file" id="file-input" class="file-input" accept=".pdf,.doc,.docx,.mp4,.mov,.avi,.jpg,.jpeg,.png">
    </a-scene>
    
    <!-- Description modal -->
    <div id="description-modal" class="modal">
        <div class="modal-content">
            <div class="modal-title">Enter a description for your file</div>
            <textarea id="description-input" placeholder="Describe your file here..."></textarea>
            <div class="button-container">
                <button class="cancel-btn" onclick="cancelDescription()">Cancel</button>
                <button class="submit-btn" onclick="submitDescription()">Submit</button>
            </div>
        </div>
    </div>

    <script>
        // Create paddy plants
        const paddyField = document.querySelector('#paddy-plants');
        const plantCount = 200;
        
        for (let i = 0; i < plantCount; i++) {
            const plant = document.createElement('a-entity');
            const x = (Math.random() - 0.5) * 28;
            const z = (Math.random() - 0.5) * 28;
            const height = 0.8 + Math.random() * 0.4;
            const tilt = (Math.random() - 0.5) * 15;
            
            plant.setAttribute('position', `${x} 0 ${z}`);
            plant.setAttribute('rotation', `${tilt} 0 0`);
            plant.setAttribute('class', 'paddy-plant');
            
            let plantHTML = '';
            const strandCount = 5 + Math.floor(Math.random() * 5);
            
            for (let s = 0; s < strandCount; s++) {
                const angle = (s / strandCount) * 360;
                const radius = 0.05;
                const sx = Math.sin(angle * Math.PI/180) * radius;
                const sz = Math.cos(angle * Math.PI/180) * radius;
                const curve = (Math.random() - 0.5) * 0.2;
                
                plantHTML += `
                    <a-entity position="${sx} 0 ${sz}">
                        <a-tube path="0 0 0, ${curve} ${height*0.7} ${curve*0.5}, ${curve*1.5} ${height} 0"
                                radius="0.01" segments-radial="4" color="#8FBC8F" roughness="0.8"></a-tube>
                        <a-sphere position="${curve*1.5} ${height} 0" radius="0.05" color="#FFD700" roughness="0.3"></a-sphere>
                    </a-entity>
                `;
            }
            
            plant.innerHTML = plantHTML;
            paddyField.appendChild(plant);
        }

        // Wind animation
        setInterval(() => {
            const wind = Math.sin(Date.now() / 1500) * 10;
            document.querySelectorAll('.paddy-plant').forEach(plant => {
                const sway = wind * (0.1 + Math.random() * 0.3);
                const currentRotation = plant.getAttribute('rotation');
                plant.setAttribute('rotation', `${currentRotation.x} ${sway} ${currentRotation.z}`);
            });
        }, 50);

        // Create elegant blackboards at random positions
        const blackboards = document.querySelector('#blackboards');
        const boardCount = 5;
        
        for (let i = 0; i < boardCount; i++) {
            const board = document.createElement('a-entity');
            const x = (Math.random() - 0.5) * 40;
            const z = (Math.random() - 0.5) * 40;
            const rotationY = Math.random() * 360;
            
            board.setAttribute('position', `${x} 1.5 ${z}`);
            board.setAttribute('rotation', `0 ${rotationY} 0`);
            board.setAttribute('class', 'blackboard');
            board.setAttribute('id', `blackboard-${i}`);
            
            board.innerHTML = `
                <a-entity position="0 0 0">
                    <!-- Blackboard frame -->
                    <a-box width="3.2" height="2.2" depth="0.1" position="0 0 -0.06" color="#654321" roughness="0.7"></a-box>
                    <!-- Blackboard surface with chalkboard texture -->
                    <a-plane width="3" height="2" color="#1a1a1a" class="clickable" 
                            material="shader: flat; side: double; roughness: 0.9; src: https://img.freepik.com/free-photo/blackboard-texture_1194-6851.jpg; repeat: 3 2">
                        <a-text value="Click to upload file" color="#ffffff" align="center" width="2.8" position="0 0.8 0.01" opacity="0.8"></a-text>
                        <a-text class="file-name" value="" color="#ffffff" align="center" width="2.8" position="0 0.6 0.01" opacity="0.8" font="kelsonsans"></a-text>
                        <a-text class="file-type" value="" color="#f1c40f" align="center" width="2.8" position="0 0.4 0.01" font="kelsonsans"></a-text>
                        <a-text class="file-size" value="" color="#95a5a6" align="center" width="2.8" position="0 0.2 0.01" font="kelsonsans"></a-text>
                        <a-text class="file-description" value="" color="#3498db" align="center" width="2.8" position="0 -0.2 0.01" wrap-count="30" font="kelsonsans"></a-text>
                        <a-text value="Description:" color="#ffffff" align="center" width="2.8" position="0 0 0.01" opacity="0.8" font="kelsonsans" visible="false" class="description-label"></a-text>
                        <a-image class="file-preview" width="1.5" height="1" position="0 -0.8 0.01" visible="false"></a-image>
                    </a-plane>
                    <!-- Elegant stand -->
                    <a-entity position="0 -1.1 0">
                        <a-cylinder radius="0.1" height="0.2" position="0 0 0" color="#654321" roughness="0.7"></a-cylinder>
                        <a-cylinder radius="0.08" height="2" position="-1.55 1 0" color="#654321" roughness="0.7" rotation="0 0 15"></a-cylinder>
                        <a-cylinder radius="0.08" height="2" position="1.55 1 0" color="#654321" roughness="0.7" rotation="0 0 -15"></a-cylinder>
                    </a-entity>
                </a-entity>
            `;
            
            blackboards.appendChild(board);
        }

        // File upload and description functionality
        const fileInput = document.querySelector('#file-input');
        const descriptionModal = document.querySelector('#description-modal');
        const descriptionInput = document.querySelector('#description-input');
        let currentBoard = null;
        let currentFile = null;
        
        // Click handler for blackboards
        document.querySelectorAll('.blackboard .clickable').forEach(board => {
            board.addEventListener('click', function() {
                const boardEntity = this.parentElement.parentElement;
                currentBoard = boardEntity;
                
                // Trigger file input click
                fileInput.click();
            });
        });
        
        // Handle file selection
        fileInput.addEventListener('change', function(e) {
            if (!currentBoard) return;
            
            const file = e.target.files[0];
            if (!file) return;
            
            currentFile = file;
            
            // Show description modal
            descriptionModal.style.display = 'block';
        });
        
        // Cancel description input
        function cancelDescription() {
            descriptionModal.style.display = 'none';
            currentFile = null;
            fileInput.value = '';
        }
        
        // Submit description and complete file upload
        function submitDescription() {
            const description = descriptionInput.value || "No description provided.";
            
            if (!currentBoard || !currentFile) {
                descriptionModal.style.display = 'none';
                return;
            }
            
            // Update board with file info
            const fileName = currentBoard.querySelector('.file-name');
            const fileType = currentBoard.querySelector('.file-type');
            const fileSize = currentBoard.querySelector('.file-size');
            const filePreview = currentBoard.querySelector('.file-preview');
            const fileDescription = currentBoard.querySelector('.file-description');
            const descriptionLabel = currentBoard.querySelector('.description-label');
            
            // Clear previous preview if any
            filePreview.setAttribute('visible', 'false');
            
            // Display file name (truncate if too long)
            const displayName = currentFile.name.length > 20 ? currentFile.name.substring(0, 17) + '...' : currentFile.name;
            fileName.setAttribute('value', displayName);
            
            // Set type and size information
            let typeText = '';
            let sizeText = '';
            
            if (currentFile.type.includes('video')) {
                typeText = 'VIDEO FILE';
                sizeText = `${(currentFile.size / (1024 * 1024)).toFixed(1)} MB`;
                // You could add a video icon here if desired
            } 
            else if (currentFile.type.includes('pdf')) {
                typeText = 'PDF DOCUMENT';
                sizeText = `${(currentFile.size / 1024).toFixed(1)} KB`;
            } 
            else if (currentFile.type.includes('word') || currentFile.name.endsWith('.doc') || currentFile.name.endsWith('.docx')) {
                typeText = 'WORD DOCUMENT';
                sizeText = `${(currentFile.size / 1024).toFixed(1)} KB`;
            }
            else if (currentFile.type.includes('image')) {
                typeText = 'IMAGE';
                sizeText = `${(currentFile.size / 1024).toFixed(1)} KB`;
                
                // Create preview for images
                const reader = new FileReader();
                reader.onload = function(e) {
                    filePreview.setAttribute('src', e.target.result);
                    filePreview.setAttribute('visible', 'true');
                };
                reader.readAsDataURL(currentFile);
            }
            else {
                typeText = 'FILE';
                sizeText = `${(currentFile.size / 1024).toFixed(1)} KB`;
            }
            
            fileType.setAttribute('value', typeText);
            fileSize.setAttribute('value', sizeText);
            
            // Set description and make label visible
            fileDescription.setAttribute('value', description);
            descriptionLabel.setAttribute('visible', 'true');
            
            // Reset modal
            descriptionModal.style.display = 'none';
            descriptionInput.value = '';
            currentFile = null;
            fileInput.value = '';
        }

        // Avatar movement system
        const avatar = document.querySelector('#player-avatar');
        const cameraRig = document.querySelector('#camera-rig');
        const camera = document.querySelector('#camera');
        const leftLeg = document.querySelector('#left-leg');
        const rightLeg = document.querySelector('#right-leg');
        const leftArm = document.querySelector('#left-arm');
        const rightArm = document.querySelector('#right-arm');
        
        let isWalking = false;
        let walkCycle = 0;
        const moveSpeed = 0.1;
        const turnSpeed = 2;
        
        // Keyboard controls
        const keys = {
            w: false, a: false, s: false, d: false,
            ArrowLeft: false, ArrowRight: false
        };
        
        document.addEventListener('keydown', (e) => keys[e.key] = true);
        document.addEventListener('keyup', (e) => keys[e.key] = false);
        
        // Initialize camera position
        cameraRig.setAttribute('position', avatar.getAttribute('position'));
        
        // Animation and movement loop
        function update() {
            const avatarRotation = avatar.getAttribute('rotation');
            const avatarPosition = avatar.getAttribute('position');
            const cameraPosition = camera.getAttribute('position');
            
            // Movement - now based on camera direction when moving forward
            if (keys.w || keys.s || keys.a || keys.d) {
                isWalking = true;
                
                // Get camera rotation to determine forward direction
                const cameraRotation = camera.getAttribute('rotation');
                const angle = cameraRotation.y * Math.PI / 180;
                
                // Forward vector based on camera's y rotation (left/right)
                const forward = new THREE.Vector3(
                    Math.sin(angle),
                    0,
                    Math.cos(angle)
                ).normalize();
                
                // Right vector perpendicular to forward
                const right = new THREE.Vector3(
                    Math.sin(angle + Math.PI/2),
                    0,
                    Math.cos(angle + Math.PI/2)
                ).normalize();
                
                // Apply movement
                const moveVector = new THREE.Vector3();
                if (keys.w) moveVector.add(forward);
                if (keys.s) moveVector.sub(forward);
                if (keys.d) moveVector.add(right);
                if (keys.a) moveVector.sub(right);
                
                moveVector.normalize().multiplyScalar(moveSpeed);
                avatar.setAttribute('position', {
                    x: avatarPosition.x + moveVector.x,
                    y: avatarPosition.y,
                    z: avatarPosition.z + moveVector.z
                });
                
                // Rotate avatar to face movement direction when moving forward/backward
                if (keys.w || keys.s) {
                    const targetAngle = Math.atan2(moveVector.x, moveVector.z) * 180 / Math.PI;
                    avatar.setAttribute('rotation', {
                        y: targetAngle,
                        x: 0,
                        z: 0
                    });
                }
            } else {
                isWalking = false;
            }
            
            // Rotation with arrow keys (independent of camera)
            if (keys.ArrowLeft) {
                avatar.setAttribute('rotation', {
                    y: avatarRotation.y - turnSpeed,
                    x: 0,
                    z: 0
                });
            }
            if (keys.ArrowRight) {
                avatar.setAttribute('rotation', {
                    y: avatarRotation.y + turnSpeed,
                    x: 0,
                    z: 0
                });
            }
            
            // Walking animation
            if (isWalking) {
                walkCycle += 0.2;
                const legSwing = Math.sin(walkCycle) * 30;
                const armSwing = Math.sin(walkCycle) * 20;
                
                leftLeg.setAttribute('rotation', `${legSwing} 0 0`);
                rightLeg.setAttribute('rotation', `${-legSwing} 0 0`);
                leftArm.setAttribute('rotation', `${-armSwing} 0 0`);
                rightArm.setAttribute('rotation', `${armSwing} 0 0`);
            } else {
                // Reset to standing position
                leftLeg.setAttribute('rotation', '0 0 0');
                rightLeg.setAttribute('rotation', '0 0 0');
                leftArm.setAttribute('rotation', '0 0 30');
                rightArm.setAttribute('rotation', '0 0 -30');
            }
            
            // Camera rig follows avatar smoothly
            const currentRigPos = cameraRig.getAttribute('position');
            const targetX = avatarPosition.x;
            const targetZ = avatarPosition.z;
            
            // Simple smoothing for camera follow
            const smoothFactor = 0.1;
            const newX = currentRigPos.x + (targetX - currentRigPos.x) * smoothFactor;
            const newZ = currentRigPos.z + (targetZ - currentRigPos.z) * smoothFactor;
            
            cameraRig.setAttribute('position', {
                x: newX,
                y: avatarPosition.y,
                z: newZ
            });
            
            // Camera looks at avatar (adjust this to see more of the body)
            camera.lookAt(avatar.object3D.position);
            
            requestAnimationFrame(update);
        }
        
        update();
    </script>
</body>
</html>